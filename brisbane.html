<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Brisbane Travel Dashboard</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        .dashboard-container { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; padding: 20px; font-family: 'Pretendard', sans-serif; }
        .card { border: 1px solid #ddd; border-radius: 12px; padding: 15px; background: #fff; box-shadow: 0 4px 6px rgba(0,0,0,0.05); }
        .card-title { font-weight: bold; margin-bottom: 10px; font-size: 1.1rem; border-bottom: 2px solid #f0f0f0; padding-bottom: 5px; }
        #map { height: 300px; border-radius: 8px; }
        .weather-info, .exchange-info { font-size: 1.2rem; text-align: center; margin: 10px 0; }
        .schedule-list { list-style: none; padding: 0; }
        .schedule-item { margin-bottom: 8px; font-size: 0.9rem; }
        .d-day { color: #e74c3c; font-weight: bold; }
        @media (max-width: 768px) { .dashboard-container { grid-template-columns: 1fr; } }
    </style>
</head>
<body>

<div class="dashboard-container">
    <div class="card">
        <div class="card-title">ğŸŒ¦ï¸ ë¸Œë¦¬ì¦ˆë²ˆ í˜„ì¬ ë‚ ì”¨</div>
        <div id="weather-display" class="weather-info">ë°ì´í„° ë¡œë”© ì¤‘...</div>
        <p style="font-size: 0.8rem; color: #666; text-align: center;">(2ì›”ì€ ë¥ê³  ìŠµí•˜ë‹ˆ í†µê¸°ì„± ì¢‹ì€ ì˜·ì„ ì±™ê¸°ì„¸ìš”)</p>
    </div>

    <div class="card">
        <div class="card-title">ğŸ’µ ì‹¤ì‹œê°„ í™˜ìœ¨ (AUD/KRW)</div>
        <div id="exchange-rate" class="exchange-info">1 AUD = ë¡œë”© ì¤‘...</div>
        <div style="text-align: center;">
            <input type="number" id="aud-input" placeholder="AUD ì…ë ¥" style="width: 80px;"> AUD = 
            <span id="krw-output">0</span> ì›
        </div>
    </div>

    <div class="card" style="grid-column: span 2;">
        <div class="card-title">ğŸ“ ë¸Œë¦¬ì¦ˆë²ˆ ì£¼ìš” ìŠ¤íŒŸ ë° ëŸ¬ë‹ ì½”ìŠ¤</div>
        <div id="map"></div>
    </div>

    <div class="card" style="grid-column: span 2;">
        <div class="card-title">ğŸ“… ì—¬í–‰ ì¼ì • (2/15 - 2/21) <span id="d-day-timer" class="d-day"></span></div>
        <ul class="schedule-list">
            <li class="schedule-item">âœ… <strong>2/15 (ì¼):</strong> ë¸Œë¦¬ì¦ˆë²ˆ ë„ì°© ë° ì—ì–´ë¹„ì•¤ë¹„ ì²´í¬ì¸, ì‚¬ìš°ìŠ¤ë±…í¬ ì‚°ì±…</li>
            <li class="schedule-item">âœ… <strong>2/16 (ì›”) - 2/19 (ëª©):</strong> ë§¤ì¼ ì•„ì¹¨ ì¡°ê¹… (ë³´íƒ€ë‹‰ ê°€ë“  ì½”ìŠ¤), ë„ì‹¬ íœ´ì‹</li>
            <li class="schedule-item">âœ… <strong>2/20 (ê¸ˆ):</strong> ê¸°ë…í’ˆ ì‡¼í•‘ ë° ë§ˆì§€ë§‰ ë§Œì°¬</li>
            <li class="schedule-item">âœ… <strong>2/21 (í† ):</strong> ì²´í¬ì•„ì›ƒ í›„ ì‹œë‚´ ê´€ê´‘, 23:00 ë¸Œë¦¬ì¦ˆë²ˆ ì¶œêµ­</li>
        </ul>
    </div>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
    // 1. D-Day ê³„ì‚°
    const tripStart = new Date('2026-02-15T00:00:00');
    const now = new Date();
    const diff = tripStart - now;
    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
    document.getElementById('d-day-timer').innerText = diff > 0 ? `(D-${days})` : "(ì—¬í–‰ ì¤‘!)";

    // 2. ë‚ ì”¨ ì •ë³´ (OpenWeatherMap API ì˜ˆì‹œ - ì‹¤ì œ ì‚¬ìš©ì‹œ API Key í•„ìš”)
    // ê°„ë‹¨í•œ êµ¬í˜„ì„ ìœ„í•´ ë‚ ì”¨ ìœ„ì ¯ í˜¸ì¶œ ë°©ì‹ìœ¼ë¡œ ëŒ€ì²´ ê°€ëŠ¥
    document.getElementById('weather-display').innerHTML = `26Â°C / íë¦¼ â˜ï¸<br><small>ìŠµë„ 75% | ê°•ìˆ˜í™•ë¥  20%</small>`;

    // 3. í™˜ìœ¨ ì •ë³´ (ë¬´ë£Œ API ì‚¬ìš©)
    fetch('https://open.er-api.com/v6/latest/AUD')
        .then(res => res.json())
        .then(data => {
            const rate = data.rates.KRW.toFixed(2);
            document.getElementById('exchange-rate').innerText = `1 AUD = ${rate} ì›`;
            document.getElementById('aud-input').addEventListener('input', (e) => {
                document.getElementById('krw-output').innerText = (e.target.value * rate).toLocaleString();
            });
        });

    // 4. ì§€ë„ ì„¤ì • (ë¸Œë¦¬ì¦ˆë²ˆ ì¤‘ì‹¬)
    const map = L.map('map').setView([-27.4709, 153.0235], 13);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

    // ì£¼ìš” ìŠ¤íŒŸ ë§ˆì»¤
    const spots = [
        { name: "ë¸Œë¦¬ì¦ˆë²ˆ ë³´íƒ€ë‹‰ ê°€ë“  (ì¶”ì²œ ì¡°ê¹… ì½”ìŠ¤)", lat: -27.4744, lng: 153.0294 },
        { name: "ì‚¬ìš°ìŠ¤ë±…í¬ íŒŒí¬ëœë“œ", lat: -27.4772, lng: 153.0213 },
        { name: "í€¸ ìŠ¤íŠ¸ë¦¬íŠ¸ ëª° (ì‡¼í•‘)", lat: -27.4694, lng: 153.0251 }
    ];

    spots.forEach(spot => {
        L.marker([spot.lat, spot.lng]).addTo(map).bindPopup(spot.name);
    });
</script>

</body>
</html>
